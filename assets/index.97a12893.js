import{L as A,M as I,O as S,a as W,P as C,V as p,B as L,b as m,c as z,d as E,S as G,H as B,W as D,e as O,F as U,f as H}from"./vendor.0d7c1d19.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};R();const i=24,u=1,l=u*(i-1),k=.1,y=4;let N={rnd:Math.random,from:function(a){return a[~~(this.rnd()*a.length)]},range:function(a=0,e=1){return this.rnd()*(e-a)+a},seed:function(a){return this.rnd=()=>{let e=Math.sin(a++)*1e4;return e-Math.floor(e)},this}},x=N.seed(42),v=(a,e,n,r=0,t=0)=>a*Math.sin(e*n+r)+t;const d=Math.PI;let M=(a,e,n)=>{let r=[];return["x","y","z"].map(t=>{let s=(e[t]-a[t])/(n-1);for(let o=1;o<n-1;o++)r[o-1]||(r[o-1]=new p(0,0,0)),r[o-1][t]=a[t]+o*s}),[a,...r,e]},F=new A({color:15346170}),q=new I({color:1906056,specular:14483958});class V{constructor(e){this.container=new S,this.container.position.set(-(l/2),-1.5,0),this.plane=new W(new C(l,l,i-1,i-1),q),this.plane.rotation.x=-d/2,this.plane.position.set(l/2,-.001,-(l/2),0);{let n=new Float32Array(i*i*3),r=[];for(let s=i-1,o=0;s>=0;s--,o++)M(new p(0,0,-s*u),new p(l,0,-s*u),i).forEach((h,c)=>{n[o*(i*3)+c*3+0]=h.x,n[o*(i*3)+c*3+1]=h.y,n[o*(i*3)+c*3+2]=h.z,c!==i-1&&r.push(o*i+c,o*i+c+1)});let t=new L;t.setAttribute("position",new m(n,3)),t.setIndex(new m(new Uint16Array(r),1)),this.horizontal=new z(t,F)}{let n=new Float32Array(i*i*3),r=[];for(let s=0;s<i;s++)M(new p(s*u,0,-l),new p(s*u,0,0),i).forEach((g,h)=>{n[s*i*3+h*3]=g.x,n[s*i*3+h*3+1]=g.y,n[s*i*3+h*3+2]=g.z,h!==i-1&&r.push(s*i+h,s*i+h+1)});let t=new L;t.setAttribute("position",new m(n,3)),t.setIndex(new m(new Uint16Array(r),1)),this.vertical=new z(t,F)}this.randoms=[];for(let n=0;n<i**2;n++)this.randoms.push(x.range(-1.5,0));this.update(),this.container.add(this.plane,this.horizontal,this.vertical)}update(){for(let e=0;e<i;e++){let n=v(2,4*d,e/(i-1),-d/2)+Math.abs(v(x.range(1,2),d,e/(i-1),d));e===i-1&&(n=-6);for(let r=0;r<i;r++){let t=v(x.range(4,5),3*d,r/(i-1)),s=Math.max(1.5,t+n+this.randoms[e*i+r]);this.horizontal.geometry.attributes.position.array[e*i*3+r*3+1]=s,this.vertical.geometry.attributes.position.array[r*i*3+e*3+1]=s,this.plane.geometry.vertices[e*i+r].z=s}}this.vertical.geometry.attributes.position.needsUpdate=!0,this.horizontal.geometry.attributes.position.needsUpdate=!0,this.plane.geometry.verticesNeedUpdate=!0}}let f=window.innerWidth,w=window.innerHeight;class K{constructor({node:e,dpr:n=window.devicePixelRatio,antialias:r=!1,tryWebGL2:t=!1}){this.canvas=e,this.dpr=n,this.antialias=r,this.tryWebGL2=t,this.radId=null,this.init(),window.addEventListener("resize",()=>this.resize())}createCamera(){this.camera=new E(50,f/w,.1,l*(y-2)),this.camera.position.set(0,1.8,3)}createLight(){this.light=new G(14225407,.75),this.light.penumbra=1,this.light.angle=.5,this.light.position.set(0,120,-l*5*y),this.scene.add(this.light,new B(14225407,1840005,.25))}createSegments(){this.segments=[];for(let e=0;e<y;e++){let n=new V(this.scene);n.container.position.z=-1*e*l,this.segments.push(n),this.scene.add(n.container)}}getContext(){return this.tryWebGL2&&D.isWebGL2Available()?this.canvas.getContext("webgl2"):this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}init(){this.scene=new O,this.scene.fog=new U(1050656,l,l*2),this.scene.position.set(0,0,5),this.scene.rotation.x=0,this.createCamera(),this.createLight(),this.createSegments(),this.renderer=new H({canvas:this.canvas,context:this.getContext(),antialias:this.antialias,alpha:!0,powerPreference:"high-performance"}),this.renderer.setSize(f,w),this.renderer.setPixelRatio(this.dpr)}resize(){f=window.innerWidth,w=window.innerHeight,this.camera.aspect=f/w,this.camera.updateProjectionMatrix(),this.renderer.setSize(f,w),this.draw()}draw(){this.segments.forEach(({container:e})=>{e.position.z>=l&&(e.position.z=-1*l*(y-1)),e.position.z+=k}),this.renderer.render(this.scene,this.camera)}update(){this.radId=requestAnimationFrame(()=>this.update()),this.draw()}start(){this.update()}stop(){cancelAnimationFrame(this.radId)}}let $=document.getElementById("canvas"),P=new URL(document.location).searchParams,J=parseInt(P.get("dpr"))||window.devicePixelRatio,Q=P.get("antialias")!=="false",b=new K({node:$,dpr:J,antialias:Q,tryWebGL2:!0}),T=(()=>{try{return window.self!==window.top}catch(a){return!0}})();if(T){b.draw();let a=["http://localhost:8080","https://nextgtrgod.github.io"];window.addEventListener("message",e=>{if(!!a.includes(e.origin))switch(e.data){case"start":b.start();break;case"stop":b.stop();break}})}else b.start();
